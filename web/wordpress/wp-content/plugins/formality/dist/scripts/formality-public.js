/*! Formality v1.5.5 */!function(){"use strict";var e,t={465:function(){var e=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",a="fo";if(e&&"form"!==e&&(a+="__"+e),t&&(a+="__"+t),n&&(a+="--"+n),a.includes(":input")){var i=["input","textarea","select"],r=-1;a=(a+=","+a+","+a).replaceAll(":input",(function(){return r++,i[r]}))}return a},t=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",i=e(t,n,a);return"."+i.replaceAll(",",",.")},n=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n="input, textarea, select";return t?e.querySelectorAll(n):e.querySelector(n)},a=function(t){return t.classList.contains(e("form","","conversational"))},i=function(){var e=!1;if("maxTouchPoints"in navigator)e=navigator.maxTouchPoints>0;else if("msMaxTouchPoints"in navigator)e=navigator.msMaxTouchPoints>0;else{var t=window.matchMedia&&matchMedia("(pointer:coarse)");if(t&&"(pointer:coarse)"===t.media)e=!!t.matches;else if("orientation"in window)e=!0;else{var n=navigator.userAgent;e=/\b(BlackBerry|webOS|iPhone|IEMobile)\b/i.test(n)||/\b(Android|Windows Phone|iPad|iPod)\b/i.test(n)}}return e},r=function(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)&&"hidden"!==window.getComputedStyle(e).visibility},o=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:window,a=new CustomEvent("fo"+e,{view:window,bubbles:!0,detail:t});n.dispatchEvent(a)},l=function(e,t){var n=e.nextElementSibling;if(!t)return n;for(;n;){if(n.matches(t))return n;n=n.nextElementSibling}},c=function(e,t){var n=e.previousElementSibling;if(!t)return n;for(;n;){if(n.matches(t))return n;n=n.previousElementSibling}},s=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:document.scrollingElement||document.documentElement,a=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],i=a?n.scrollTop:n.scrollLeft,r=e-i,o=+new Date,l=function(e,t,n,a){var i=e;return(i/=a/2)<1?n/2*i*i+t:-n/2*((i-=1)*(i-2)-1)+t},c=function c(){var s=+new Date-o,d=parseInt(l(s,i,r,t),10);a?n.scrollTop=d:n.scrollLeft=d,s<t?requestAnimationFrame(c):a?n.scrollTop=e:n.scrollLeft=e};c()},d=function(e){if(!e.ok)throw Error(e.statusText);return e.json()},u=function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],a=Array.from(e).filter((function(e){return e.matches(t)}));return n?a[0]:a},f=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500;t&&"complete"===document.readyState&&setTimeout((function(){t.classList.remove(e("form","","first-loading"))}),n)},__=wp.i18n.__,v=function(t,n){n.preventDefault(),t.classList.toggle(e("nav","hints","less"))},p=function(){document.querySelector(t("nav","hints")).innerHTML=""},m=function(e){var n=document.querySelector(t("nav","hints")),a=e.getAttribute("data-type"),i=e.querySelector(t("label"));if(null!==i){var r=h(a,i.innerText);n.innerHTML=r}},h=function(e,t){var n={space_bar:"&#xe903;",keyboard_arrow_right:"&#xe904;",keyboard_arrow_left:"&#xe905;",keyboard_arrow_up:"&#xe906;",keyboard_arrow_down:"&#xe907;",keyboard_backspace:"&#xe908;",keyboard_tab:"&#xe909;",keyboard_return:"&#xe90a;"},a=[{text:__("Press enter or tab to proceed to next field","formality"),icons:["keyboard_return","keyboard_tab"]},{text:__("Press tab to proceed to next field","formality"),icons:["keyboard_tab"]},{text:__("Press backspace to reset this field and return to previous field","formality"),icons:["keyboard_backspace"]},{text:__("Press up or down arrows to choose your option","formality"),icons:["keyboard_arrow_up","keyboard_arrow_down"]},{text:__("Press left or right arrows to choose your option","formality"),icons:["keyboard_arrow_left","keyboard_arrow_right"]},{text:__("Press up and down arrows to increment or decrement your value","formality"),icons:["keyboard_arrow_up","keyboard_arrow_down"]},{text:__("Press enter to confirm your option and proceed to next field","formality"),icons:["keyboard_return"]},{text:__("Press space to confirm your option","formality"),icons:["space_bar"]},{text:__("Press space to select your file","formality"),icons:["space_bar"]}],i={text:[0,2],textarea:[1,2],email:[0,2],number:[5,0,2],select:[3,6],multiple:[4,7],switch:[7,0],rating:[4,0],upload:[8,0,2]}[e],r="<li><h6>".concat(t,"</h6></li>");return i.forEach((function(e){var t="";a[e].icons.forEach((function(e){t+="<i>".concat(n[e],"</i>")})),r+="<li><span>".concat(a[e].text,"</span>").concat(t,"</li>")})),r},y=wp.i18n,g=y.__,b=y.sprintf,L={text:{multiple:!1},textarea:{multiple:!1},email:{multiple:!1,rules:{email:g("This value should be a valid email","formality")}},number:{multiple:!1,rules:{number:g("This value should be a valid number","formality"),number_min:g("This value should be greater than or equal to %s","formality"),number_max:g("This value should be lower than or equal to %s","formality")}},select:{multiple:!1},multiple:{multiple:!0},rating:{multiple:!0},switch:{multiple:!1},upload:{multiple:!1,rules:{file:g("This is not a valid file","formality"),file_ext:g("%s file extension is not allowed","formality"),file_size:g("Your file exceeds the size limit","formality")}}},E=function(e){e.addEventListener("input",(function(){var n=e.closest(t("field"));k(n,!0)}))},S=function(e,t){var n={valid:!1,placeholder:""};switch(t){case"required":NodeList.prototype.isPrototypeOf(e)?e.forEach((function(e,t){e.checked&&(n.valid=!0)})):n.valid=""!==e.value;break;case"email":n.valid=e.value.match(/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/);break;case"checked":n.valid=e.checked;break;case"notchecked":n.valid=!e.checked;break;case"number":n.valid=!isNaN(e.value);break;case"number_min":n.placeholder=e.min,n.valid=parseFloat(e.value)>=n.placeholder;break;case"number_max":n.placeholder=e.max,n.valid=parseFloat(e.value)<=n.placeholder;break;case"file":n.valid=!!e.files.length;break;case"file_ext":n.file=!!e.files.length&&e.files[0],n.file&&""!==n.file.type&&(n.formats=e.getAttribute("accept").split(", "),n.placeholder=("."+n.file.name.split(".").pop()).toLowerCase(),n.valid=-1!==n.formats.indexOf(n.placeholder));break;case"file_size":n.file=!!e.files.length&&e.files[0],n.file&&n.file.size>0&&(n.valid=n.file.size<=parseInt(e.getAttribute("data-max-size")))}return n},w=function(n,a){var i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",o=n.closest(t("form")),l=n.querySelector(t("input","status")),c=o.querySelector(t("nav",'legend li[data-name="'+a+'"]'));if(n.classList.toggle(e("field","","error"),!i),l&&(l.innerHTML=r?'<div class="'+e("input","errors")+'">'+r+"</div>":""),c&&c.classList.toggle("error",!i),!i){var s=o.querySelector(t("nav","section","active"));s&&s.classList.remove(e("nav","section","validated"))}n.classList.add(e("field","","validated"))},k=function(t){var a=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(t.hasAttribute("data-excluded"))return!0;var i=t.getAttribute("data-type"),r=t.classList.contains(e("field","","required")),o=t.classList.contains(e("field","","validated")),l="rules"in L[i]?Object.keys(L[i].rules):[],c=L[i].multiple;r&&l.unshift("required");var s=n(t,c),d=c?s[0].name:s.name,u=!0,f="";return(l.includes("required")||c||s.value)&&l.forEach((function(e){if(u){var t=S(s,e);t.valid||(f="required"==e?g("This value is required","formality"):b(L[i].rules[e],t.placeholder),u=!1)}})),(!a||a&&o)&&w(t,d,u,f),u},x=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=!1,r=t(null==n?"field":'field[data-step="'+n+'"]'),o=e.querySelectorAll(r);return o.forEach((function(t,n){var r=!k(t);!i&&r&&(i=!0,I(!1,t,!1,!1,a(e)))})),!i},q=function(a,i){var r=a.querySelector(t("btn","","submit")),o=a.querySelector(t("btn","","next")),l=a.querySelector(t("btn","","prev")),c=a.querySelector(t("nav"));if(i.length>1){var s=0;l.style.display="none",r.style.display="none";var d=a.querySelector(t("nav","list"));i.forEach((function(a){var i=a.querySelector(t("section","header")),r=i?i.innerHTML:"",o=a.querySelectorAll(t("field","","required")),l="";o.forEach((function(e){var t=n(e);l+='<li data-name="'.concat(t.name,'"></li>')}));var c=e("nav","section");c+=0==s?" ".concat(e("nav","section","active")):"",c+=r?"":" ".concat(e("nav","section","hidden"));var u='<li class="'.concat(c,'"><a href="#" data-step="').concat(s,'"><div>').concat(r,'</div></a><ul class="').concat(e("nav","legend"),'">').concat(l,"</ul></li>");d.insertAdjacentHTML("beforeend",u),s++}))}else c.classList.add(e("nav","","nostep")),l.style.display="none",o.style.display="none"},A=function(e){e.querySelectorAll(t("nav","section a[data-step]")).forEach((function(t){t.addEventListener("click",(function(n){n.preventDefault();var a=t.getAttribute("data-step");P(a,e)}))})),e.querySelector(t("btn","","next")).addEventListener("click",(function(t){t.preventDefault(),P("next",e)})),e.querySelector(t("btn","","prev")).addEventListener("click",(function(t){t.preventDefault(),P("prev",e)})),e.querySelectorAll(t("nav","legend li")).forEach((function(t){t.addEventListener("click",(function(n){n.preventDefault();var a=t.getAttribute("data-name");e.querySelector('[name="'.concat(a,'"]')).focus()}))}))},_=function(a,i){var r=0,o='<li class="'.concat(e("nav","anchor"),'"><a href="#"></a><ul>'),l=a.querySelector(t("nav","list"));i.childNodes.forEach((function(i){r++;var l="field_".concat(function(e){return e.getAttribute("data-uid")}(a),"_").concat(r);if(i.setAttribute("id",l),i.classList.contains(e("field"))){var c=n(i),s=i.querySelector(t("label"));o+='<li data-name="'.concat(c.id,'"><a href="#').concat(l,'">').concat(s.innerText,"</a></li>")}else if(i.classList.contains(e("section","header"))){var d=i.querySelector("h4");o+='</ul></li><li class="'.concat(e("nav","anchor"),'"><a href="#').concat(l,'">').concat(d.innerText,"</a><ul>")}})),o+="</ul></li>",l.insertAdjacentHTML("beforeend",o)},T=function(a){var i=document.body.classList.contains("body-formality")?null:a.querySelector(t("main")),r=0;a.querySelectorAll(t("field")).forEach((function(o){new IntersectionObserver((function(i){if(i[0].isIntersecting){var l=o.id;if(r!==l){r=l;var c=o.closest(t("form","","sended")),d=a.querySelector(t("nav","list")),u=d.querySelector('a[href="#'+l+'"]'),f=parseInt(Math.max(0,u.offsetLeft-d.offsetWidth/2+u.offsetWidth/2)),v=d.querySelectorAll("a.active");if(s(f,100,d,!1),v.forEach((function(e){e.classList.remove("active")})),u.classList.add("active"),u.closest(t("nav","anchor")).firstElementChild.classList.add("active"),!o.classList.contains(e("field","","focus"))&&!c)n(o).focus()}}}),{root:i,rootMargin:"-50% 0px"}).observe(o)})),a.querySelectorAll(t("nav","anchor a")).forEach((function(t){t.addEventListener("click",(function(i){i.preventDefault(),i.stopPropagation();var r=t.getAttribute("href"),o=a.querySelector(r),l=n(o);I(l,o,!!t.parentElement.classList.contains(e("nav","anchor"))&&"next",i,!0)}),!0)}))},P=function(a,i){var r=i.querySelectorAll(t("section")),o=i.querySelector(t("section","","active")),l=[].slice.call(r).indexOf(o);switch(a){case"next":a=l+1;break;case"prev":a=l-1}var c=r[a];if(function(n,a,i){if(a>i)return!0;var r=x(n,a);return r&&n.querySelectorAll(t("nav","section"))[a].classList.add(e("nav","section","validated")),r}(i,l,a)){var s,d,u=i.querySelectorAll(t("nav","section")),f=a>=r.length-1,v=["moveFromRight","moveToRight","moveFromLeft","moveToLeft"];(s=o.classList).remove.apply(s,v),(d=c.classList).remove.apply(d,v),o.classList.add(a>l?v[3]:v[1]),c.classList.add(a>l?v[0]:v[2]),o.classList.remove(e("section","","active")),c.classList.add(e("section","","active")),u.forEach((function(t,n){t.classList.toggle(e("nav","section","active"),n==a)})),setTimeout((function(){var e=c.querySelectorAll(t("field"));n(e[l>a?e.length-1:0]).focus()}),400);var p=i.querySelector(t("btn","","submit")),m=i.querySelector(t("btn","","next")),h=i.querySelector(t("btn","","prev"));p.style.display=f?"":"none",m.style.display=f?"none":"",h.style.display=a>0?"":"none"}},O=function(e){var t=e.querySelector("[data-dbg-image], [data-dbg-color]");return t&&M(),!!t},M=function(){var e=getComputedStyle(document.documentElement).getPropertyValue("--formality_bg");document.documentElement.style.setProperty("--formality_bg_backup",e)},D=function(e){var n=document.querySelector(t("bg"));if(n){var a=e.getAttribute("data-dbg-image"),i=e.getAttribute("data-dbg-color");if(a){var r=document.createElement("span"),o=new Image;n.appendChild(r),o.onload=function(){r.style.backgroundImage="url("+a+")",r.style.opacity=1,i&&document.documentElement.style.setProperty("--formality_bg",i)},o.src=a}else{n.querySelectorAll("span").forEach((function(e){e.matches(":not(:last-child)")?e.remove():e.style.opacity=0}))}i?a||document.documentElement.style.setProperty("--formality_bg",i):document.documentElement.style.setProperty("--formality_bg","var(--formality_bg_backup)")}},H=function(t,n){var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=!1;t.addEventListener("focus",(function(){n.classList.add(e("field","","focus")),m(n),a&&D(n),o("FieldFocus",{el:n})})),t.addEventListener("blur",(function(){i||(n.classList.remove(e("field","","focus")),p())})),n.addEventListener("mousedown",(function(){i=!0})),n.addEventListener("mouseup",(function(){i=!1})),n.addEventListener("mouseleave",(function(){i=!1}))},F=function(n,a){var i=n.getAttribute("placeholder");if(i){var r=a.querySelector(t("input"));r&&r.insertAdjacentHTML("beforeend",'<div class="'.concat(e("input","status"),'" data-placeholder="').concat(i,'"></div>'))}},j=function(n,a){n.addEventListener("change",(function(){var i="checkbox"==n.type?null!==a.querySelector("input:checked"):Boolean(n.value);a.classList.toggle(e("field","","filled"),i);var r=document.querySelector(t("nav",'list li[data-name="'+n.name+'"]'));r&&r.classList.toggle("active",i),i&&o("FieldFill",{el:a})}))},C=function(e,t,n){e.addEventListener("keydown",(function(a){(!e.value||["checkbox","radio","select-one"].includes(e.type))&&"Backspace"==a.key?I(e,t,"prev",a,n):("Enter"==a.key&&"textarea"!==e.type||"Tab"==a.key)&&I(e,t,"next",a,n)}))},I=function(a,o){var d=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"next",u=arguments.length>3?arguments[3]:void 0,f=arguments.length>4&&void 0!==arguments[4]&&arguments[4],v=!1,p=t("field:not("+t("field","","disabled")+")");switch(d){case"next":v=l(o,p);break;case"prev":v=c(o,p);break;default:v=o}if(v){if(f&&!i()){var m=0;if(document.body.classList.contains("body-formality")){m=window.innerHeight/3;var h=v.ownerDocument.defaultView;if(o&&o.classList.contains(e("field","","select-js"))&&"next"==d){a.blur();var y=o.querySelector(t("select","list"));m+=y.offsetHeight}s(v.getBoundingClientRect().top+h.pageYOffset-m,300)}else{var g=o.closest(t("main"));m=g.offsetHeight/3,s(g.scrollTop+v.offsetTop-m,300,g)}}else{var b=n(v);b.focus()}u&&u.preventDefault()}else{var L=o.closest(t("form"));if(o.matches(":first-child, :nth-child(2)")&&"prev"==d){var E=L.querySelector(t("btn","","prev"));E&&r(E)&&(u&&u.preventDefault(),P("prev",L))}else if(o.matches(":last-child")&&"next"==d){u&&u.preventDefault();var S=L.querySelector(t("btn","","next"));if(S&&r(S))P("next",L);else{var w=new Event("submit",{bubbles:!0,cancelable:!0});L.dispatchEvent(w)}}}},z=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,n=document.querySelectorAll(t("section:first-child :input")),a=!1;n.forEach((function(t){a||0!=t.value.length||(a=!0,setTimeout((function(){t.focus()}),e))}))},B=function(t,n,a){if(t.classList.contains(e("form"))){if(t.classList.contains(e("form","","loading")))return;t.classList.add(e("form","","loading"))}fetch(window.formality.api+"formality/v1/token/",{method:"POST",mode:"cors",cache:"no-cache",credentials:"same-origin",body:JSON.stringify({nonce:window.formality.action_nonce}),headers:new Headers({"Content-Type":"application/json;charset=UTF-8","X-WP-Nonce":window.formality.login_nonce})}).then(d).then((function(e){200==e.status?n(t,e.token):a(t,e)})).catch((function(e){a(t,{status:400})}))},N=wp.i18n,W=(N.__,N.sprintf,function(e,t){var a=new FormData;a.append("action","formality_send"),a.append("token",t),a.append("id",e.getAttribute("data-id")),n(e,!0).forEach((function(e){if(!(["checkbox","radio"].indexOf(e.type)>-1)||e.checked){var t="file"==e.type?e.getAttribute("data-file"):e.value;a.append("field_"+e.name,t)}})),fetch(window.formality.api+"formality/v1/send/",{method:"POST",mode:"cors",cache:"no-cache",credentials:"same-origin",body:a,headers:new Headers({"X-WP-Nonce":window.formality.login_nonce})}).then(d).then((function(t){R(e,t)})).catch((function(t){R(e,{status:400,error:"responseText"in t?t.responseText:t})}))}),R=function(n,a){var i=200==a.status,r=n.querySelector(t("result"));(r.classList.add(e("result","","visible")),n.classList.remove(e("form","","loading")),document.activeElement.blur(),n.classList.add(e("form","",i?"sended":"error")),o(i?"FormSuccess":"FormError",{data:r,form:n}),i)&&(n.querySelector(t("btn","","prev")).style.display="none");var l=n.querySelector(t("result","success")),c=n.querySelector(t("result","error")),d=n.querySelector(t("actions"));l.classList.toggle("active",i),c.classList.toggle("active",!i),s(d.offsetTop,300)},U=function(e,t){if(t.hasAttribute("data-conditional")){var n="",a=JSON.parse(t.getAttribute("data-conditional"));for(var i in a)n+=(0==i?"":", ")+'[name="'+a[i].field+'"]';if(n)V(e,t,a),e.querySelectorAll(n).forEach((function(n){n.addEventListener("input",(function(){V(e,t,a)}))}))}},V=function(e,t,n){var a=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],i=!1;for(var r in n){var o="field"in n[r]?e.querySelectorAll('[name="'+n[r].field+'"]'):"";if(o.length){var l=!1,c="";o.forEach((function(e){switch(e.getAttribute("type")){case"radio":case"checkbox":c=e.checked?e.value:"";break;case"file":c=e.hasAttribute("data-file")?e.getAttribute("data-file"):"";break;default:c=e.value}}));var s="value"in n[r]?n[r].value:"";switch(n[r].is){case"==":l=c==s;break;case"!==":l=c!==s;break;case">":l=c>s;break;case">=":l=c>=s;break;case"<=":l=c<=s;break;case"<":l=c<s}if(l)i=!0;else{if(0==r&&void 0!==n[1]&&"&&"==n[1].operator){i=!1;break}if("&&"==n[r].operator&&n[r]._key>1){i=!1;break}}}}if(!a)return i;X(t,i)},X=function(t,n){var a=t.classList.contains(e("field","","disabled")),i=t.querySelector("video");t.classList.contains(e("field","","fixed-height"))||(t.style.setProperty("--fixed-height",t.offsetHeight+"px"),t.classList.add(e("field","","fixed-height"))),n&&a?(t.classList.remove(e("field","","disabled")),Z(t,!1)):n||a||(t.classList.add(e("field","","disabled")),Z(t,!0)),i&&(i.style.display="none",i.style.display="block")},Z=function(e){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],a=e.querySelector("[required]");if(n?e.setAttribute("data-excluded",""):e.removeAttribute("data-excluded"),a){var i=document.querySelector(t("nav",'list li[data-name="'+a.name+'"]'));i&&i.classList.toggle("disabled",n)}},J=function(n,a){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";a.preventDefault(),i||(i=n.getAttribute("href").replace("#","").replace("-open",""));var r=document.querySelector(t("sidebar[data-sidebar="+i+"]"));if(r){r.classList.add(e("sidebar","","open"));var l=r.querySelector("iframe");if(l)o("SidebarOpened",{},l.contentWindow);else{var c=r.querySelector(t("sidebar","iframe"));if(!c)return;c.innerHTML="<iframe onload=\"this.parentElement.classList.add('".concat(e("sidebar","iframe","show"),'\')" src="').concat(c.getAttribute("data-src"),'"></iframe>')}}},Y=function(t,n){n.stopPropagation(),n.preventDefault(),t.classList.remove(e("sidebar","","open")),document.body.focus(),o("SidebarClosed")},$=function(t){t.classList.contains(e("field","","multiple"))&&t.querySelectorAll("input + label").forEach((function(e){e.addEventListener("click",(function(){e.previousElementSibling.focus()}))}))},G=function(n){if(n.classList.contains(e("field","","number"))){var a=n.querySelector("input"),i='<div class="'.concat(e("input","spinner"),'"><a href="#"></a><a href="#"></a></div>');a.insertAdjacentHTML("afterend",i),a.addEventListener("keydown",(function(e){e.code.search("Digit")||e.code.search("Arrow")||e.preventDefault()})),n.querySelectorAll(t("input","spinner a")).forEach((function(e,t){e.addEventListener("click",(function(e){e.preventDefault();var n=a.value;n?0==t&&a.max>n?a.stepUp():1==t&&a.min<n&&a.stepDown():a.value=0,a.dispatchEvent(new Event("change")),a.focus()}))}))}},K=function(t){t.classList.contains(e("field","","rating"))&&t.querySelectorAll("input + label").forEach((function(e){e.addEventListener("click",(function(){e.previousElementSibling.focus()}))}))},Q=function(t){if(t.classList.contains(e("field","","switch"))){var n=t.querySelector("input");n.nextElementSibling.addEventListener("click",(function(){n.focus()})),n.addEventListener("keydown",(function(e){"Backspace"===e.code&&n.checked&&(n.checked=!1,e.preventDefault(),e.stopImmediatePropagation())}),!0)}},ee=function(t){if(t.classList.contains(e("field","","textarea"))){var n=t.querySelector("textarea"),a=n.value;n.value="";var i=n.scrollHeight,r=window.getComputedStyle(n).getPropertyValue("line-height");r=parseInt(r.replace("px","")),n.value=a;var o=n.rows,l=n.getAttribute("maxlength")?" / "+parseInt(n.getAttribute("maxlength")):"",c=l?'<div class="'.concat(e("textarea","counter"),'">').concat(a.length+l,"</div>"):"";n.insertAdjacentHTML("beforebegin",c),n.addEventListener("input",(function(e){var t=n.previousElementSibling,a=n.value,c=a.match(/(\r\n|\n|\r)/g),s=null!=c&&navigator.userAgent.indexOf("Safari")>-1&&navigator.userAgent.indexOf("Chrome")<=-1?c.length+a.length:a.length;t&&(t.innerText=s+l),n.rows=o;var d=Math.ceil((n.scrollHeight-i)/r);n.rows=o+d}))}},te=wp.i18n.__,ne=function(n){if(n.classList.contains(e("field","","upload"))){var a=n.querySelectorAll("label"),i=n.querySelector("input");a.forEach((function(t){t.addEventListener("click",(function(){n.classList.remove(e("field","","error")),t.classList.contains(e("upload"))&&i.focus()}))})),i.addEventListener("change",(function(){var a=!!i.files.length&&i.files[0];if(n.classList.remove(e("field","","uploaded")),k(n)&&a){var r=n.querySelector(t("upload","info"));r.innerHTML="<i></i><span><strong>".concat(te("Checking file","formality"),"</strong>").concat(te("Please wait","formality"),"</span>");var o=new FileReader,l=["jpeg","jpg","png","gif","svg","webp"];o.fileName=a.name,o.fileSize=a.size,o.fileFormat=a.name.split(".").pop().toLowerCase(),o.onload=function(a){r.innerHTML="<i".concat(-1!==l.indexOf(a.target.fileFormat)?' style="background-image:url('+a.target.result+')"':"","></i><span><strong>").concat(a.target.fileName,"</strong>").concat(ae(a.target.fileSize),'</span><a class="').concat(e("upload","remove"),'" href="#"></a>'),n.querySelector(t("upload","remove")).addEventListener("click",(function(e){e.preventDefault(),i.value="",i.dispatchEvent(new Event("change"))})),B(n,re,ie)},o.readAsDataURL(a)}else i.value="",i.focus(),n.classList.remove(e("field","","filled"))})),i.addEventListener("blur",(function(){n.classList.remove(e("field","","error"))})),i.addEventListener("keydown",(function(e){i.value&&"Backspace"==e.key&&(i.value="",i.dispatchEvent(new Event("change")))})),oe(n,i)}},ae=function(e,t){if(0==e)return"0 Bytes";var n=t||2,a=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,a)).toFixed(n))+" "+["Bytes","KB","MB","GB"][a]},ie=function(n,a){var i=n.querySelector("input");200==a.status&&a.field?(i.setAttribute("data-file",a.file),n.classList.add(e("field","","uploaded"))):(i.value="",n.classList.remove(e("field","","filled")),n.classList.add(e("field","","error")),n.querySelector(t("input","status")).innerHTML='<div class="'.concat(e("input","errors"),'">').concat(a.error,"</ul>"))},re=function(e,n){var a=new FormData,i=e.closest(t("form")),r=e.querySelector("input"),o=r.getAttribute("data-file");a.append("action","formality_upload"),a.append("nonce",window.formality.action_nonce),a.append("token",n),a.append("id",i.getAttribute("data-id")),a.append("field",r.id),a.append("field_"+r.id,r.files[0]),o&&a.append("old",o),fetch(window.formality.api+"formality/v1/upload/",{method:"POST",mode:"cors",cache:"no-cache",credentials:"same-origin",body:a,headers:new Headers({"X-WP-Nonce":window.formality.login_nonce})}).then(d).then((function(t){ie(e,t)})).catch((function(t){ie(e,{status:400,debug:"responseText"in t?t.responseText:t,error:"Internal server error",field:r.id})}))},oe=function(){var n,a=arguments.length>0&&void 0!==arguments[0]&&arguments[0],i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];a&&i?(i.addEventListener("dragenter",(function(){i.focus(),a.classList.add(e("field","","dragging"))})),i.addEventListener("dragleave",(function(){i.blur(),a.classList.remove(e("field","","dragging"))}))):document.addEventListener("dragover",(function(a){var i=a.dataTransfer;if(i.types&&(i.types.indexOf?-1!=i.types.indexOf("Files"):i.types.contains("Files"))){var r=document.querySelectorAll(t("form"));r.forEach((function(n){n.classList.add(e("form","","dragging")),n.querySelectorAll(t("field","","upload")+t("field","","error")).forEach((function(t){t.classList.remove(e("field","","error"))}))})),clearTimeout(n),n=setTimeout((function(){r.forEach((function(t){t.classList.remove(e("form","","dragging"))}))}),200)}}))},le=function(n,a){if(n.classList.contains(e("field","","select"))){var i=n.querySelector(t("input")),r=i.querySelector("select");r.addEventListener("focus",(function(){n.classList.add(e("field","","open"))})),r.addEventListener("blur",(function(){setTimeout((function(){n.classList.remove(e("field","","open"))}),100)})),ce(n,i,r,a)}},ce=function(n,a,r,o){if(!i()){var l=r.querySelectorAll("option:not([disabled])"),c="";l.forEach((function(e){var t=e.hasAttribute("selected")?' class="selected"':"";c+='<li data-text="'.concat(e.innerText,'" data-value="').concat(e.value,'"').concat(t,">").concat(e.innerText,"</li>")}));var s=l.length<6?" options--"+l.length:"";a.insertAdjacentHTML("beforeend",'<div class="'.concat(e("select","list")+s,'"><ul>').concat(c,"</ul></div>")),n.classList.add(e("field","","select-js")),r.insertAdjacentHTML("beforebegin",'<div class="'.concat(e("select","fake"),'"></div>')),n.querySelector(t("select","fake")).addEventListener("mousedown",(function(t){t.preventDefault(),n.classList.toggle(e("field","","open")),r.focus()}));var d=n.querySelectorAll(t("select","list li"));d.forEach((function(e){e.addEventListener("click",(function(t){t.preventDefault();var a=e.getAttribute("data-value");se(n,r,d,a,!0)}))})),r.addEventListener("keydown",(function(e){e.preventDefault();var t=u(d,".focus");if("ArrowUp"==e.key)de(t,"prev",d);else if("ArrowDown"==e.key)de(t,"next",d);else if("Enter"==e.key&&t)se(n,r,d,t.getAttribute("data-value"),!0);else if(/^[a-zA-Z0-9]{1}$/.test(e.key)){var a=u(d,'[data-text^="'.concat(e.key,'" i]'));a&&de(t,"search",a)}}))}},se=function(t,n,a,i){var r=arguments.length>4&&void 0!==arguments[4]&&arguments[4];a.forEach((function(e){e.getAttribute("data-value")==i?(e,e.classList.add("selected","focus")):e.classList.remove("selected","focus")})),n.value=i,n.dispatchEvent(new Event("input")),n.dispatchEvent(new Event("change")),t.classList.remove(e("field","","error")),r&&(n.focus(),t.classList.remove(e("field","","open")))},de=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"next",n=arguments.length>2?arguments[2]:void 0;if(e){var a="search"==t?n:"next"==t?e.nextElementSibling:e.previousElementSibling;a&&(e.classList.remove("focus"),a.classList.add("focus"),e=a)}else(e="search"==t?n:n[0]).classList.add("focus");var i=e.closest("ul"),r=parseInt(Math.max(0,e.offsetTop-i.offsetHeight/2+e.offsetHeight/2));s(r,100,i)},ue=function(e){var n=a(e);!function(e){f(e),document.addEventListener("readystatechange",(function(){f(e)}))}(e),function(e){e.querySelectorAll(t("section")).forEach((function(e,n){e.querySelectorAll(t("field")).forEach((function(e){e.setAttribute("data-step",n)}))}))}(e),fe(e,n),function(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=e.querySelectorAll(t("section"));n?(_(e,a[0]),T(e)):(q(e,a),A(e))}(e,n),function(e){e.addEventListener("submit",(function(t){if(t.preventDefault(),!x(e))return!1;B(e,W,R),o("FormSubmit",e)}))}(e),function(e){var n=e.querySelectorAll(t("media video"));n&&n.forEach((function(e){e.nextElementSibling.addEventListener("click",(function(t){t.preventDefault(),e.paused?(e.play(),e.classList.add("playing")):(e.pause(),e.classList.remove("playing"))}))}))}(e)},fe=function(e){var a=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=e.querySelectorAll(t("field")),r=O(e);i.forEach((function(t){U(e,t),n(t,!0).forEach((function(e){H(e,t,r),F(e,t),j(e,t),C(e,t,a),E(e)})),$(t),G(t),K(t),Q(t),ee(t),ne(t),le(t,a)}))};document.addEventListener("DOMContentLoaded",(function(){var n;document.querySelectorAll(t("form")).forEach((function(e){ue(e)})),window.addEventListener("foSidebarOpened",(function(e){z(600)}),!1),document.body.classList.contains("single-formality_form")&&z(1e3),(n=document.querySelector(t("nav","hints")))&&(n.setAttribute("data-more",__("Show more hints","formality")),n.setAttribute("data-less",__("Show less hints","formality")),n.addEventListener("mousedown",(function(e){v(n,e)})),n.addEventListener("touchstart",(function(e){v(n,e)}))),window.location==window.parent.location&&(document.querySelectorAll(t("cta")).forEach((function(n){var a=n.getAttribute("href"),i=n.id;if(a&&i&&!document.querySelector(t("sidebar[data-sidebar="+i+"]"))){var r='<div class="'.concat(e("sidebar")," ").concat(i,'" data-sidebar="').concat(i,'"><div class="').concat(e("sidebar","iframe"),'" data-src="').concat(a,'"></div></div>');document.body.insertAdjacentHTML("beforeend",r)}n.addEventListener("click",(function(e){J(n,e,i)}))})),document.querySelectorAll('[href^="#formality-open-"]').forEach((function(e){e.addEventListener("click",(function(t){J(e,t)}))})),setTimeout((function(){document.querySelectorAll(t("sidebar")).forEach((function(t){t.classList.add(e("sidebar","","loaded")),t.addEventListener("click",(function(e){Y(t,e)}))}))}),1e3)),oe()}))},544:function(){},427:function(){}},n={};function a(e){var i=n[e];if(void 0!==i)return i.exports;var r=n[e]={exports:{}};return t[e](r,r.exports,a),r.exports}a.m=t,e=[],a.O=function(t,n,i,r){if(!n){var o=1/0;for(d=0;d<e.length;d++){n=e[d][0],i=e[d][1],r=e[d][2];for(var l=!0,c=0;c<n.length;c++)(!1&r||o>=r)&&Object.keys(a.O).every((function(e){return a.O[e](n[c])}))?n.splice(c--,1):(l=!1,r<o&&(o=r));if(l){e.splice(d--,1);var s=i();void 0!==s&&(t=s)}}return t}r=r||0;for(var d=e.length;d>0&&e[d-1][2]>r;d--)e[d]=e[d-1];e[d]=[n,i,r]},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},function(){var e={641:0,523:0,318:0};a.O.j=function(t){return 0===e[t]};var t=function(t,n){var i,r,o=n[0],l=n[1],c=n[2],s=0;if(o.some((function(t){return 0!==e[t]}))){for(i in l)a.o(l,i)&&(a.m[i]=l[i]);if(c)var d=c(a)}for(t&&t(n);s<o.length;s++)r=o[s],a.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return a.O(d)},n=self.webpackChunkFormality=self.webpackChunkFormality||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))}(),a.O(void 0,[523,318],(function(){return a(465)})),a.O(void 0,[523,318],(function(){return a(544)}));var i=a.O(void 0,[523,318],(function(){return a(427)}));i=a.O(i)}();